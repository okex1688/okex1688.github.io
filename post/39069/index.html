<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          以太坊扩容终极解决方案 ：Danksharding （一） - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="以太坊也是可扩展的。" />
<meta name="keywords" content="ETH" />







<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/39069/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="以太坊扩容终极解决方案 ：Danksharding （一）" />
<meta property="og:description" content="以太坊也是可扩展的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/39069/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-06-17T00:00:00+00:00" />

<meta itemprop="name" content="以太坊扩容终极解决方案 ：Danksharding （一）">
<meta itemprop="description" content="以太坊也是可扩展的。"><meta itemprop="datePublished" content="2022-06-17T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-06-17T00:00:00+00:00" />
<meta itemprop="wordCount" content="7388">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="以太坊扩容终极解决方案 ：Danksharding （一）"/>
<meta name="twitter:description" content="以太坊也是可扩展的。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">以太坊扩容终极解决方案 ：Danksharding （一）</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2022-06-17">
      2022-06-17
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 7388 字 -
        预计阅读 15 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<h2 id="总览">总览</h2>
<p>熟悉Vitalik（以太坊创始人）的都了解其著名的不可能三角理论，相较于传统货币理论，一国无法同时实现货币政策的独立性，汇率稳定和资本自由流动，最多只能同时满足两个目标，而不得不一定程度舍弃另一个目标，而区块链所面临的“不可能三角”则是指无法同时满足去中心化，安全，可扩展性/效率这三项特征。其最近的文章“Endgame”则再次强调了区块链的终极形态，区块生产将由中心化的生产者主导，而区块链验证将由更多资源消耗较低，门槛较低的去中心化部署的，无需许可的节点参与（可以通过个人手机，PC等），同时实现真正的防审查的开放网络。在之前的区块链模块化演变之路中，我们也多次强调，以太坊的愿景是成为一个以Rollups为中心的，统一的解决和数据可用性协议，通过去中心化的验证节点，以太坊网络获得了较高的安全性，尽管相较于其他Layer1， Rollups的费用较高（主要是post to Layer1的费用，下文会提到解决方案），并且缺少一定灵活性，但是Rollups在享有Layer1的安全性同时，通过以太坊的结算和数据可用性获得了一定的扩展性。 </p>
<h2 id="danksharding">DankSharding</h2>
<p>以太坊目前采取了数据层面的分片，Rollups可以通过这种分片方式提交数据, 因而摒弃了之前的分片计划（Sharding1.0)。通过这种分片，底层的数据容量将会提升，因此Rollups提交数据的成本将会大大降低。当然还是通过以太坊的内置执行环境实现, 但是其巨大的状态，给其执行带来一定的难度。我们会在Danksharding(二）中介绍弱无状态“Weak Stateleness”和沃尔克树“Verkle Tree”的概念，试图解决状态验证和状态存储的问题。而Celestia通过将执行层和数据可见层分离的方式，通过引入数据可见抽样以及轻节点的概念，极大地提升了其可扩展性。</p>
<p>在Sharding1.0的设计中，每个区块有64个分片，每个分片有单独的提议者和委员会，轮流通过节集合选举出来。每个提议者和为委员会负责验证自己的分片数据（1/64)。而在Sharding1.0中，以太坊并没有采用数据可见采样，而是通过每个分片验证集合大多数诚实节点假设下载全部数据实现。</p>
<p>这个设计显得冗余和复杂，同时存在攻击者风险，通过分片来分配节点的方式也不妥。同时，因为信标链上的验证者需要收集所有的委员会投票，这需要时间，所以保证在一个时隙内（Slot）完成投票也非常困难，除非引入额外假设（比如同步假设）。</p>
<p>而相比于Sharding1.0的设计，Danksharding的设计则引入了大区块的设计，大区块将信标区块和所有分片数据结合并且实现同步确认，大区块由专门的创建者（Builder)创建，而验证节点通过数据可见采样确保所有数据都是可见的。</p>
<h2 id="数据可见采样">数据可见采样</h2>
<p>数据可见采样我们之前在多篇文章中已经介绍过，由于资源和成本限制，大部分节点无法下载全部的数据，如何在不下载全部数据的情况下验证数据/交易呢？我们需要通过数据可见采样确保数据的可见性，所以节点（即使是轻节点）可以轻松安全的在无需下载全部数据的情况下验证数据。 </p>
<p>而数据可用采样是根据长期存在的数据保护技术删除码（erasure coding)，就是利用这个技术本身可以让原本的数据实现扩展，比如双倍大小, 那么原本的数据可以恢复，比如通过这些扩展数据的50%。Reed-Solomon可以将原有数据进行拓展，而拓展的数据和原有的数据则通过拉格朗日插值公式（Lagrange interpolation formula）形成多项式。多项式式中的次数是其最高指数。比如x³+x²+2x-4的次数为3.  而多项式的一个核心特征就是任何次数为N的多项式都可以通过其上任意的N+1项恢复。比如原有数据为a₀,a₁,a₂,a₃。那么通过多项式对应的价值分别为f(0),f(1),f(2),f(3)，所以f(0)=a₀,f(1)=a₁,f(2)=a₂,f(3)=a₃因而我们可以找到其对应的次数为3的多项式。同时，我们可以通过删除码技术，将原有数据拓展额外四项数值，我们将其记录为c₀,c₁,c₂,c₃。f(4)) =c₀,f(5)=c₁,f(6)=c₂,f(7)=c₃因此，我们可以利用多项式的特征，通过其上的任意四个数据样本恢复多项式，也就是50%（4/8)的数据。比如我们采样了30次，那么当可见的数据小于50%的时候，就会受到攻击。而这个概率只有（½)³º。</p>
<h2 id="kzg-多项式承诺">KZG 多项式承诺</h2>
<p>那么我们通过数据可见采样实现了数据可见性（DAS)，基于数据可见性，全节点可以生成欺诈证明，轻节点可以在无需下载全部数据的情况下，验证全部数据，我们又是如何确保数据被正确的采用了删码技术呢？如果被额外拓展的数据是一个空集，或者是垃圾数据，那么我们如何恢复数据呢？</p>
<p>通常情况下，我们通过默克尔根证明某些集合中数据的存在性，而且适用于大量的数据。但是原有数据和通过删码技术得到的拓展数据，我们如何保证他们在同一个多项式上呢？那么我们就需要其他方法。而默克尔根无法证明。目前主要有两个方向：</p>
<p>1）Celestia通过欺诈证明实现。当见证人发现数据没有被正确采用删码技术，那么这个人就会将欺诈证明提交提醒其他人。但是这里需要最少诚实假设和同步假设（当有人给我发送欺诈证明的时候，我需要确保我能在一定时间内收到通知）。</p>
<p>2）以太坊和Polygon Avail则采用了KZG多项式承诺（KZG commitments) 的方法。这里免去了欺诈证明中的包括少数诚实假设和同步假设等的安全假设。当然，在数据恢复和重建的时候，我们不可避免地都需要引入这两个假设（无论是Celestia还是以太坊，还是Polygon Avail)。</p>
<p>其他的解决方案比如Zk-proofs。但是其现有的计算瓶颈, 使得其目前并被推崇为一个可行方案，我们期待未来的技术进步，而以太坊也可能在之后引入其STARKs的技术，因为KZG多项式承诺本质并不防量子计算，而STARKs可以。 KZG多项式承诺我们可以理解为一种通过加密方式承诺价值的多项式承诺方案。</p>
<p><img src="https://img.bibiqing.com/news/2022/0617/29_rkzegn0sof.png" alt="vUJCLJVtxg3xei0CkNWeUusqPee79IFJ7mRqzwgj.png" title="6234843"></p>
<p>而KZG根（多项式承诺）可以理解为类似于默克尔根（向量承诺）的承诺。而我们上文也提到了原有的数据通过多项式匹配到为f(0),f(1),f(2),f(3)), 而我们将拓展的数据匹配为f(4),f(5), f(6),f(7)。而f(0)到f(7)将确保在同一个多项式上。</p>
<h3 id="kzg-多项式承诺和欺诈证明">KZG 多项式承诺和欺诈证明</h3>
<p>KZG 多项式承诺并不能保证后量子安全，同时需要可信设置&ndash; 必须生成具有一定关系的椭圆曲线点，但不允许任何人知道它们之间的实际关系-但可以通过分发信任，允许许多人参与设置，设计为只要一个人是诚实的，它就有效；而STARKs提供了后量子安全，而且其可信设置只需要一个诚实参与者， 但是相比于欺诈证明，其无需引入同步假设和最小诚实假设，可以确保删码技术被正确使用，延迟性也较低。注意，这个延迟性体现在当采用数据可见采样的时候，不同节点间需要欺诈证明实现信息互通，而这里欺诈证明会大大提升区块间隔，而验证者投票给错误编码块的风险性也会上升，而KZG则减少了这类问题的发生。</p>
<p>但是在区块数据恢复的过程中，我们仍然需要用到上述两个假设：</p>
<p>1）我们需要足够多的节点（轻节点或者全节点）去采集足够多的数据样本，从而恢复数据，这里需要最小诚实假设，一个全节点可以通过数据可见，生成欺诈证明。</p>
<p>2）当数据可见后，不同节点需要在某时间段内沟通并且将数据重新组合，比如当区块数据不完整，部分可见的时候，全节点必须其他节点沟通，将数据拼起来。</p>
<h3 id="协议内提议者创建者分离-pbs">协议内提议者创建者分离 (PBS)</h3>
<p>POW中的矿工以及合并后的验证者都承担着类似的角色，他们负责提议，投票和出块。POW中矿工通过哈希算法计算的形式参与，而合并后，验证节点直接在区块链上投票。而PBS创建了全新的创建者角色，负责生成包含信标链和分片数据的大区块，同时以向验证者竞价的形式，提交区块。和Vitalik中endgame的愿景相一致，在PBS中，一个诚实的创建者就可以保证网络的安全以及抗审查性， 而验证节点则需要大多数诚实假设。 </p>
<p>创建者的收益主要来自于优先小费（来自于searcher）以及可提取的矿工价值（MEV)。在充分竞争的市场中，创建者竞价的价值会等同于其可见利润（其可提取的MEV总价值-硬件成本等费用）(这等同于只有一个最高利润的创建者能够胜出，而其他创建者最终的竞价都是一个收支平衡点）而所有的价值都会给到验证节点集合，因为验证者将无条件获得竞价金额。</p>
<p><img src="https://img.bibiqing.com/news/2022/0617/29_gbhmg8yotr.png" alt="5wh4e3rW7TdvIKBRkq6BEPKaTNnHiQxwNqUlgJSh.png" title="6234845"></p>
<p>首先，创建者提交区块头信息，这里包含执行区块哈希，竞价以及签名；之后信标链提议者选出获胜区块头，并且无条件获得全部竞价金额（不管是否顺利出块，如果没有出块，创建者仍然需要支付这些金额），而这个无条件支付方式解决了提议者对于创建者的信任问题；委员会成员确定获胜区块头并且签名，创建者展现区块身，以及其他相关证明，剩余的委员会将认证获胜区块身。</p>
<p>这里我们为什么需要先提交区块头，确认之后再展现区块身体？这里采用了承诺—揭示机制。如果一开始提交大量区块身体，会造成大量的带宽拥堵，同时其他的创建者也可以发现其策略，进行MEV攻击，即使对于一些提议者来说，他们也可以复制这些策略，而并不给创建者任何奖励和激励，而MEV攻击会逐步让创建者和提议者的角色逐步融合，给整个生态带来巨大伤害。</p>
<p>当然这里的问题是一个双时隙的延迟问题，在PBS中整个区块时间为2个时隙。比如合并后的出块时间为12秒，而这里在不引入其他假设的情况下应该为24秒。当然我们最终采用8秒/16秒的折中算法。</p>
<p>PBS的设计在一定程度上解决了验证节点去中心化的问题，同时虽然大区块需要消耗相当多的资源，比较难创建，但是验证相对容易，这也和Endgame的理念相一致。所以将创建者和提议者分开，本质上是处理大量资源，数据，难度的机构可以参与搭建，而提议者可以是验证者。这种设计本质上让MEV扩展到数以万计的验证者身上。</p>
<h3 id="防审查列表crlist">防审查列表（crlist)</h3>
<p>当然这里和MEV问题中一样，创建者和验证者一样，会利用自己的权利进行交易的审查，比如优先自己的交易，比如屏蔽其他人的交易等等。这里我们是如何解决的呢？以太坊采用了防审查的列表，提议者将他看到的所有交易都放在这个列表中，所以创建者必须将所有的交易都包含进去（除非区块已满）。这里的过程类似于PBS的过程，创建者首先需要提交包含所有交易的列表及概述，而后创建者创建区块身，竞价，并且包含交易列表的相应哈希，提议者选择获胜的竞价和区块头。之后创建者展示区块身并且证明他们已经囊括了所有列表上的交易，或者证明区块已满。委员会证明区块身的有效性。</p>
<h3 id="2d-kzg-方案">2D KZG 方案</h3>
<p>在以太坊中，一个KZG多项式承诺并不能解决所有数据问题，通常一个区块有很多KZG承诺。在恢复区块的过程中，我们需要很多低能源消耗的节点参与，所以相对应的KZG承诺也需要进行相应划分。而为了让恢复过程更为简单，这里每个区块中在m个KZG承诺中编码m个数据碎片, 而这个需要在每个数据碎片上进行数据可见采样。因此，以太坊再次利用Reed-Solomon技术，将m个承诺扩展至2m。</p>
<p>在Danksharding中，每个区块中最多有256个数据碎片（目标为128个）。KZG承诺0代表的是数据碎片0相对应的原有数据和拓展数据。而和之前1D的承诺一样，我们能确保0-511的承诺都在同一个多项式上。而至此，我们可以基于此进行数据可见采样，确保所有分片中的数据可见性。</p>
<p><img src="https://img.bibiqing.com/news/2022/0617/29_4orv6e49pa.png" alt="qegp46maMCOouBFRQYRSl71AhI9OrxfgxfdKldUu.png" title="6234847"></p>
<p>在1D方案中，我们需要50%的数据恢复所有数据，而在2D中，我们需要75%的数据才可以恢复，因此我们需要采集更多的样本数据。这里需要强调的是，在1D的方案中，我们得出结论，我们需要采集30个样本，而数据不可见的概率为（½)³º,  而要达到相同的概率, 在2D的方案中我们需要采集75个样本。让我们通过带宽理解2D方案是如何提升效率的：</p>
<p>在Sharding1.0方案中（1D）30个采集样本，需要采集64个分片，所以如果需要检查所有数据可见性，需要512B*64分片*30样本/16秒 = 60KB/秒 带宽 （基于一个数据碎片容量为1bytes假设）。而在2D方案中，我们可以将其考虑为一个区块，所以需要512B*1*75样本/16秒=2.5KB/秒带宽Danksharding (DS)</p>
<p>DS设计基于PBS，其中在特定时间由一个创建者，一个提议者以及一个投票委员会组成。一般的验证节点无法处理这么大量的带宽，所以需要引入PBS。在DS中，每个区块的数据存储量有多少呢？我们可以计算下，每个数据碎片字段元素*32字节*256数据碎片=32MB。在DS的设计中，由于我们引入了大区块的概念，尽管数据仍然需要分片，但是整体上你可以理解为一个统一区块，并且在上进行数据可见采样。</p>
<h3 id="大多数诚实验证">大多数诚实验证</h3>
<p>在DS中，每个时段都被分为32个时隙，因此每个时隙将匹配1/32节点进行验证。每个节点在制定时隙验证相应的2行2列，同时需要下载其他时隙区块上的该行该列。比如，我需要认证时段2时隙26上对应的2行2列，因此我要确保从上一次我认证的区块开始（时段1时隙26）到现在，所有时隙（区块）上，我需要认证的行列信息都可见。所以DS中需要基于大多数诚实节点假设，确保数据可见性以及负责数据恢复。这个和上文提到的低能源消耗的采集75个样本的轻节点（个人节点）不是一个概念。上文可以称为私人随机抽样。</p>
<h3 id="恢复重建">恢复/重建</h3>
<p>恢复/重建过程中我们需要再此引入最小诚实假设和同步假设。而通过测算，我们需要64,000节点。但是实际情况下，这个数据会大大减少。64, 000的节点数量是基于同样的验证节点不同时运行多个节点的假设，但这显然与现实不符，因为以太坊单个节点的质押数量限制为32个，所以很多大户将仓位分散到多个节点上。如果你采集的数据超过2行2列，那么你会大大提升概率，因为这里面会有很多交集，因此64, 000数量要求将会大幅减少。</p>
<h3 id="恶意多数安全的私人随机抽样">恶意多数安全的私人随机抽样</h3>
<p>一旦采用了私人随机抽样，任何节点可以采集任意的数据样本，即使当有恶意多数提醒数据可见（当数据不可见）的情况下，可以通过私人随机抽样高概率的证明数据可见，而上文提到验证节点的行列数据采样是基于多数诚实验证节点的假设</p>
<p>这里私人很重要，如果攻击者攻击了匿名性，他们可以贿赂少部分采样节点，根据你的请求提交数据并且隐瞒其他数据，因为根据你的采样数据，你无法证明数据可见。</p>
<h2 id="总结">总结：</h2>
<p>相比于Sharding1.0 我们看到了Danksharding的极大进展，1）委员会的功能被弱化了，他们只需要投票，这个减少了受贿的风险。原来的分片设计中，验证者每个时间段需要投票，但是每个分片都有自己的提议者和委员会会，所以每个时隙需要1/32*64=1/2-0-4-8的节点集合。而在DS中，验证者也同样每个时间段需要投票，而每个时隙需要1/32的节点集合投票。</p>
<p>2）数据碎片的确认不再是单独的，而是和主链同步确认，这确保了rollups和以太坊执行环境中的同步互操作性，我们知道波卡等设计都一定程度上牺牲了可扩展性，而实现同步互操作性，而以太坊的这个设计，在实现分片（可扩展）的同时，确保数据碎片的交易可以立即被确认，同时上传至L1。这个也将衍生出更多的类似于Cosmos上的互操作性设计，比如共享流动性，比如Superfliod 质押，跨链安全性和跨链账户等设计，我们将持续关注。</p>
<p>3）同时我们也在上文提到了带宽的提升，通过大区块的设计以及2D KZG承诺，我们发现Sharding1.0中60KB/S的带宽要求，而在DS中只需要2.5KB/S。</p>
<p>而在可扩展性层面，在模块化的设计理念中，比如Celestia的设计理念，当轻节点数量越来越多时，我们可以发现区块容量也越来越大，数据吞吐量也越来越高（TPS/秒），所以本质上去中心化促使了扩展性。当然尽管我们看到了扩展性的提高，但是仍然会有一些trade off。除了安全可扩展的，允许更多生态搭建的底层以外，我们需要在数据存储和带宽上进行提升。 </p>
<p>数据存储主要包含数据可见和数据可检索性，而公式层需要保证在足够的时间段内，任何人在满足安全假设的基础上，可以下载相应的数据，之后再存储至任何地方（这是基于1/N信任假设，只要有一个诚实者存储数据就可以）。当吞吐量指数级上升时，这些假设可能就不成立了。</p>
<p>数据可见采样中需要足够的节点数据足够多的数据，当然如果有恶意节点存在，数据样本不够的情况下，就无法恢复原有数据。因此当吞吐量指数级上升时，我们需要越来越多的数据样本采集节点加入，同时也需要提高带宽要求。所以对于32MB的KZG 证明，需要较好的GPU，CPU，同时至少2.5GBit/s带宽。</p>
<p>所以我们看到DS是一种简化为数据分片的新型分片形式，ETH提供了不可扩展的数据，而Rollups将其转为可扩展的计算，其设计更为简单，减少了协议本身需要完成的事情，而更专注于与L2s的协作。同时也为EVM的执行分片埋下了伏笔，但是即使在EVM没有执行分片的情况下，以太坊也是可扩展的。</p>
<p>来源：0xf1E2</p>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/39084/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">一文盘点值得关注的Move to Earn加密应用</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/39081/">
                <span class="next-text nav-default">印度央行行长：由于匿名性DEFI造成了特别的挑战</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#总览">总览</a></li>
    <li><a href="#danksharding">DankSharding</a></li>
    <li><a href="#数据可见采样">数据可见采样</a></li>
    <li><a href="#kzg-多项式承诺">KZG 多项式承诺</a>
      <ul>
        <li><a href="#kzg-多项式承诺和欺诈证明">KZG 多项式承诺和欺诈证明</a></li>
        <li><a href="#协议内提议者创建者分离-pbs">协议内提议者创建者分离 (PBS)</a></li>
        <li><a href="#防审查列表crlist">防审查列表（crlist)</a></li>
        <li><a href="#2d-kzg-方案">2D KZG 方案</a></li>
        <li><a href="#大多数诚实验证">大多数诚实验证</a></li>
        <li><a href="#恢复重建">恢复/重建</a></li>
        <li><a href="#恶意多数安全的私人随机抽样">恶意多数安全的私人随机抽样</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结：</a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.308d1186d284e0b3f5e6187c85ea0a927fdc75459dbd958fc0fb1f4400ed52ee.js" integrity="sha256-MI0RhtKE4LP15hh8heoKkn/cdUWdvZWPwPsfRADtUu4=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
