<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          观察 | 以太坊闪电贷的众生相 - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="自流动性挖矿引起DeFi浪潮以来，DeFi迎来了闪电贷攻击密集期。" />

  <meta name="keywords" content="区块大全, 区块链, 区块链资讯, 区块链快讯, 区块链新闻, 比特币行情" />






<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/23000/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="观察 | 以太坊闪电贷的众生相" />
<meta property="og:description" content="自流动性挖矿引起DeFi浪潮以来，DeFi迎来了闪电贷攻击密集期。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/23000/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-05-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-05-26T00:00:00+00:00" />

<meta itemprop="name" content="观察 | 以太坊闪电贷的众生相">
<meta itemprop="description" content="自流动性挖矿引起DeFi浪潮以来，DeFi迎来了闪电贷攻击密集期。"><meta itemprop="datePublished" content="2021-05-26T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-05-26T00:00:00+00:00" />
<meta itemprop="wordCount" content="9388">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="观察 | 以太坊闪电贷的众生相"/>
<meta name="twitter:description" content="自流动性挖矿引起DeFi浪潮以来，DeFi迎来了闪电贷攻击密集期。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">观察 | 以太坊闪电贷的众生相</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2021-05-26">
      2021-05-26
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 9388 字 -
        预计阅读 19 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"> 区块链 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<p>来源：<a href="https://www.jinse.com/blockchain/1100523.html">金色财经</a></p>
<p>作者：Huobi DeFiLabs</p>
<h2 id="前言"><strong>前言</strong></h2>
<p>2018年年中Marble首次提出了闪电贷这一概念，但在一年后闪电贷才开始慢慢发展起来，并于2020年进入区块链用户的视线中。闪电贷交易基于区块链的原子化特性而成立，是一种特殊的无抵押借贷交易。原子化特性要求用户所有的相关操作必须是在一笔交易哈希之中，包括还款操作。若有任意一个要求未达到，则涉及多个操作的整笔交易必须回滚，失败的交易无法被打包。</p>
<p>在这种设定之下，理论上闪电贷交易允许用户通过无抵押的方式借出流动性池内的所有通证，但需在进行一系列互换抵押清算操作之后、交易结束之前归还所借通证以及固定的借贷成本。这种借贷方式完美解决了当前链上借贷的违约风险，相较于传统链上借贷通过超额抵押完成借贷行为，闪电贷为区块链用户带来了一种新的可能。</p>
<p>在这种可能被发现之前，闪电贷却因为两笔攻击进入大众视野。2020年2月份bZx分别于15日、18日遭受了两次闪电贷攻击，损失金额各自达到33万和64万美金。同时自流动性挖矿引起DeFi浪潮以来，DeFi迎来了闪电贷攻击密集期。</p>
<p>下图是截止至目前发现的12起闪电贷攻击事件，总损失高达9965万美金。损失金额最高来自于21年2月13日Cream.Finance所遭受的攻击，有趣的是在遭受攻击2个月后，Cream.Finance于4月8日提出将提供跨协议闪电贷（Cross-Protocol Flash Loans）服务，该跨协议闪电贷将通过Iron Bank完成。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_nk8oopb8zk.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷攻击事件总结</p>
<p>来源： Huobi DeFi Labs</p>
<p>从区块链的区块时间维度看待闪电贷，闪电贷在区块链上的到期期限为零。这意味着闪电贷的借贷利息应该为零，即借贷利率乘以到期期限为零。但现有提供闪电贷服务的主流协议之中仅dYdX不收取所谓的借贷费用，Aave要求收取0.09%，而Uniswap V2要求收取更高的费用0.3%。Huobi DeFi Labs认为在较远未来，闪电贷协议的服务费费率将趋向于零，从这一角度看dYdX似乎对闪电贷用户更友好，而Aave与Uniswap V2在未来是否能剥离闪电贷业务，提供独立于协议整体设定的服务费率仍未可知。但在当前在这场闪电贷竞赛中，三者协议以各自优势和特色割据闪电贷市场，</p>
<p>Uniswap V2在三者主流协议中最迟提供闪电贷服务，但作为DEX龙头，Uniswap V2以流动性高的优势在交易频次和借贷通证比较中脱颖而出，瓜分了闪电贷60-70%的交易市场。而dYdX作为最早发现闪电贷交易的协议平台，尽管只提供三个主流资产借贷，即ETH（WETH）、USDC和DAI，却同样不可小觑。dYdX上闪电贷交易涉及的DeFi协议高达21个。Aave在三者之中作为最纯正的借贷协议，与其它两者不同的地方是提供可直接调用的闪电贷函数；同时Aave目前是多个DeFi协议主要调用闪电贷的对象，如DeFi Saver和Furucombo都是Aave闪电贷交易的主要客户。</p>
<p>在这三者主流协议之外，Huobi DeFi Labs同样关注到Uniswap V2同期的提供闪电贷服务的协议——Instadapp。这一协议在出现伊始提供COMP加杠杆流动性挖矿和债仓管理，并在上线内一个月引起了一个闪电贷交易的小浪潮。同时它是第一个提出批量闪电贷概念的协议，但该协议却在Uniswap V2上线和Aave爆红之后归于沉寂。</p>
<p>本报告聚焦这四个协议的链上数据，共追踪了约11万条闪电贷交易数据，力图通过分析该数据呈现闪电贷交易的链上全貌。分析角度涵盖了交易笔数、地址分析、借贷通证类型和主流资产的借贷金额等，同时总结并对比了市面上围绕闪电贷功能的几乎所有协议。</p>
<h2 id="约11万笔闪电贷交易来自四个协议平台"><strong>约11万笔闪电贷交易来自四个协议平台</strong></h2>
<p>报告中闪电贷链上数据截止至2021年3月16日，根据以太坊上提供闪电贷的协议有Uniswap V2、Aave、 dYdZ和InstaDapp这一基本事实，Huobi Defi Labs追踪这四大协议获得闪电贷共10万8千笔历史交易数据。不同协议采用不同的方式提供基础闪电贷服务，Huobi DeFi Labs根据不同协议的特色使用不同方法获得链上数据。</p>
<p>总体方法概括如图中所示，Aave直接为用户提供封装好的闪电贷函数，通过闪电贷函数调用情况追踪闪电贷交易哈希；dYdX则是基于四个事件日志获得交易哈希；Uniswap V2的闪电贷链上交易数据通过Dune Analytics的UNISWAPV2CALL确定交易哈希；Instadapp的交易数据获得方式与Aave一致，通过其闪电贷函数调用情况追踪获得。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_vvsqrk1hi7.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷链上数据来源及其获取方式汇总</p>
<p>来源：Huobi DeFi Labs</p>
<p>四个闪电贷协议获取的闪电贷交易数据总览如下图，Instadapp至2020年七月份之后再无新的闪电贷交易数据，但因其可观的交易数据仍为本报告闪电贷链上数据的研究对象之一。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_0ctrrnbked.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷交易频发于Uniswap V2</p>
<h2 id="闪电贷市场随牛市进入稳定期">闪电贷市场随牛市进入稳定期</h2>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_24gs52yp85.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷交易笔数时间分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p>以太坊上闪电贷历史交易的时间分布如图所示，第一笔闪电贷交易出现于2019年6月21日，由dYdX产生。闪电贷于2019年只发生于dYdX上，且这一年闪电贷笔数仅有148条，直至2020年1月18日第二个产生闪电贷交易的协议Aave开始出现。但到此时闪电贷仍并不被大众所知，直到2月15日和18日著名的bZx攻击事件发生。</p>
<p>2020年四月和五月份InstaDapp与Uniswap V2先后上线提供闪电贷服务，六月份闪电贷交易笔数数据显示第一轮爆发开始。这一轮爆发与六月份Compound启动流动性挖矿有关。流动性挖矿引起DeFi狂热潮的开端，而Instadapp在同期适时推出COMP加杠杆流动性挖矿、债仓和抵押品互换管理功能，成为该轮爆发的主要驱动力。</p>
<p>第二轮爆发发生于去年10月，由uniswap V2推动，同时从当月起闪电贷攻击进入高发期。且在Uniswap V2上发生的闪电贷交易比例一直维持在60%左右，甚至最高曾接近90%。但在Aave V2上线之后，Aave V2瓜分了部分闪电贷交易市场。目前闪电贷市场交易频次稳定在Uniswap V2占七成，Aave占二成，dYdX一成。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_7t7acvf9f4.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷交易比例时间分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p><strong>Uniswap V2闪电贷交易失败回滚率高达9.1%</strong></p>
<p>闪电贷交易由于其特性可产生失败回滚的结果，但由于获取数据的方式不同我们仅捕捉到Uniswap V2的失败回滚现象。Uniswap V2的6.6万条交易中有约6千条交易失败回滚，Uniswap V2闪电贷交易失败回滚率高达9.1%。</p>
<p>Uniswap V2分别于2020年7月22日、2021年1月22日发生大量失败回滚的交易，具体数值为1139笔和308笔。此现象可能是由于当日有用户频繁调试其策略。在本报告中所有数据分析结果如无特别说明，均不包含此回滚交易的数据。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_mq5un6ng4e.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>Uniswap V2上失败回滚的闪电贷交易笔数历史分布</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<h2 id="批量闪电贷功能或仍处早期阶段">批量闪电贷功能或仍处早期阶段</h2>
<p>2020年12月3日，Aave宣布其V2版本主网上线，并伴随着多个功能的更新。这其中就包含批量闪电贷，批量闪电贷允许用户在闪电贷中一次性借多种不同的通证。但这并非批量闪电贷的先例。</p>
<p>在2021年3月12日之前以太坊上共发生145笔批量闪电贷交易，仅占总历史交易笔数的0.13%。其交易数分布比例如下图，尽管Aave最晚提供批量闪电贷功能，但约超过六成批量闪电贷交易通过Aave发生。Uniswap V2与Instadapp_batch均约有15%批量闪电贷交易，而dYdX并未发生任何批量闪电贷交易。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_7hp4qkweb4.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>批量闪电贷交易协议分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p>如下图为链上数据显示的批量闪电贷历史交易分布图，图中显示史上第一笔批量闪电贷为2020年6月17日Instadapp上发生的批量闪电贷交易。图中同时显示各个协议平台提供的批量闪电贷交易聚集在不同时间段，且存在似有后来者完全取缔前者批量闪电贷功能的现象。</p>
<p>自Aave上线批量闪电贷功能以来，几乎囊括了所有的批量闪电贷交易。但批量闪电贷交易数实在太少，由于相较于其它协议平台Aave上的闪电贷交易套利性较低，我们认为目前批量闪电贷的真正价值仍为被发现。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_7dbu53w3bp.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>批量闪电贷历史交易频次分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p><strong>平均1.5个调用者对应1个策略智能合约</strong></p>
<p>以太坊中存在两类账户：外部账户和合约账户。外部账户不包含代码，合约账户包含合约代码，基于该认识，通过etherscan解析的闪电贷交易From Address为外部账户或者合约账户，To Address为合约账户。换言之，From Address为调用合约账户的调用者，可为普通用户或者机器人，而To Address为闪电贷策略本身。</p>
<h2 id="地址存续时间以短期为主">地址存续时间以短期为主</h2>
<p>在此之前，Huobi DeFi Labs首先对From Address与To Address时间序列进行分析。8365个From Address中第一笔与最新一笔交易时间间隔最长为583天；5591个To Address中第一笔与最新一笔交易时间间隔最长为613天。此外在本报告中，为方便表达第一笔与最新一笔交易时间间隔被定义为存续时间，但由于这些地址有可能在未来再次发生闪电贷交易，需注意最新一笔交易不代表最后一笔交易。</p>
<p>From Address与To Address的个数比例为1.5，表明平均约有1.5个用户/机器人调用并执行闪电贷策略的合约。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_ujvyh87j5p.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>存续时间分布图显示，两种地址均存在约60%仅在当天发生闪电贷交易的情况，这表明可能存在大量闪电贷策略合约失败；或者链上市场条件并不符合闪电贷策略交易，而这些地址不得不等待链上市场条件达到预设的判断条件，才能再次触发/被调用等的情况。</p>
<p>而有约35%的From/To Address的时间间隔在半年以内，20%在30天内，这一结果揭示出闪电贷策略作为特制化交易可能存续时间极短；或者多数为针对当下某个热点协议、通证、特殊目的等的特制化交易，因此受限于链上市场条件，多数策略随着市场变化可能仅能维持一段时间。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_sdmhap3erk.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>From/To Address 时间存续分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<h2 id="存续时间与频数历史趋势">存续时间与频数历史趋势</h2>
<p>下图为From Address 与To Address的所有交易、交易笔数大于100、交易笔数大于500的历史数据图；图中圆形的大小表示交易笔数的大小，横轴为某一地址第一笔交易发生的时间，纵轴为相应地址最新一笔交易发生的时间。因而From/To两种地址均分布在图左上角区域。</p>
<p>2020年3月以前，散点数量与面积均较小，表明闪电贷处于偶发状态。2020年3月起散点数量之多显示From/To两种地址数量进入暴增阶段，同时散点面积随时间明显增加亦表示From Address发起与To Address被调用的次数呈现相同白热化趋势。</p>
<p>图中显示多数散点分布在45度线周围，这表明散点所代表的From Address/To Address都仅存在短期行为，即第一笔交易与最新一笔交易发生的时间间隔较短。部分散点分布在横轴顶部则表明这些地址在近期仍存在闪电贷交易行为。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_a0yqfis1a9.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>From Address与To Address交易时间与频数分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p><strong>不同协议的闪电贷呈现差异化地址分布规律</strong></p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_9o0159t50t.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>From Address与To Address于各个协议的数量分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p>前文已谈到From Address与To Address的总个数比例为1.5，当聚焦于不同协议上时，AAVE_d119、Uniswap V2与dYdX均比例的比例大约为1.3，与1.5相近。而AAVE_c7a9与Instadapp及其批量闪电贷Instadapp_batch的From/To比例却十分不同。Instadapp的From Address与To Address二者个数相等，而AAVE_c7a9则呈现完全不一的比例，其To Address仅有33个。</p>
<h2 id="四大协议占领不同闪电贷借款通证市场"><strong>四大协议占领不同闪电贷借款通证市场</strong></h2>
<p><strong>闪电贷交易半成以上借款通证为ETH、DAI及USDC</strong></p>
<p>闪电贷链上交易数据显示总共有1015种通证以闪电贷方式被借出，其中超过53%的交易其借款通证为ETH、DAI以及USDC，分别占据28%、15%和11%。三种通证在以太坊上有不同的角色，ETH为以太坊原生资产，DAI与USDC则为以太坊上的稳定币。</p>
<p>而前十个最常被借款通证占总交易笔数的61%，在各个协议的频次分布图如下所示。除三大常被借款通证外，其余通证为：稳定币TUSD，通证化资产WBTC，以14个DeFi资产为底层资产的可交易指数型通证DeFi Pulse Index，算法稳定币项目的通证Dynamic Set Dollar和Frax，预言机Chainlink的通证LINK，以及只发生于Uniswap V2的KP3R。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_cdbjuackb5.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>前十大借款通证各协议频次分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<p>通过前十大借款通证于各个协议上的比例分布，我们发现Uniswap V2上闪电贷交易中仅有三成来自这十大借款通证。Uniswap V2作为头部DEX，提供的可借通证为平台上所有池子的通证，实际数据表明总共有927个通证通过Uniswap V2闪电贷的方式被借用。这一优势表明Uniswap V2占据着长尾资产的闪电贷交易市场。</p>
<p>此外dYdX仅提供ETH、USDC和DAI的交易，并主要占领该三大通证的闪电贷交易市场，图中dYdX存在1%的其它通证为借款通证解析结果为空的情形。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_whfgcav0i1.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>前十大借款通证各协议比例分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<h2 id="dydx前三大借款通证各累计借款数额为其它协议数倍"><strong>dYdX前三大借款通证各累计借款数额为其它协议数倍</strong></h2>
<p>闪电贷历史交易数据显示最频繁的三种借款通证为DAI、USDC和ETH，基于这三大通证我们通过进一步研究三大借款通证在不同协议上的借款数额分布情况。由于三个通证在不同时期的价格数值不一同，此处数额以数量多少表明；以及报告中的所有数据并不对WETH和ETH进行区分。</p>
<p>结果如下图显示，dYdX前三大闪电贷借款通证的数额在多个协议中以压倒性的优势脱颖而出。这种情况的出现恰好反应dYdX上闪电贷交易手续费低廉甚至为0的绝对吸引力。而dYdX之外的Uniswap、Aave与Instadapp呈现不规律的通证数量分布。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_taes8p5zsm.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷借款总累计数额分布图</p>
<p>来源：Etherscan.io,  Huobi DeFi Labs</p>
<h2 id="闪电贷交易涉及的协议覆盖面广"><strong>闪电贷交易涉及的协议覆盖面广</strong></h2>
<p>闪电贷交易所借通证常被用于其它平台交易，不同协议平台的交易手续费、流动性池数量和大小各异，因此闪电贷交易中所涉及的DeFi协议是一个可反映闪电贷当下策略的复杂及用途广泛程度。Etherscan与Bloxy均对链上交易数据进行协议字段层面的解析，但二者解析程度不一，导致统计结果有所差异。为此，这部分数据结果为二者取最高值为最终统计结果。</p>
<p>下图为闪电贷交易所涉的DeFI协议情况，左边为提供闪电贷功能的四大协议平台Uniswap V2、Aave、dYdX和Instadapp，右边为每笔闪电贷交易涉及的协议平台情况总共有22个（含dYdX）。</p>
<p>数据统计结果显示发生在dYdX协议的闪电贷交易涉及的DeFI协议平台数量最多高达21个DeFi协议，这意味着在该协议上使用的策略更加复杂、多元，导致由它产生的闪电贷交易可以涉及较广范围的协议平台。相反Instadapp协议的闪电贷交易涉及的协议平台数量最为单一，只有8种，分别为Curve、Kyber V3、Oasis DEX、Uniswap及其V2、Sushiswap、Aave V1和dYdX。</p>
<p>而在被调用的DeFi协议平台中被调用次数达上万的协议为Sushiswap（～2.4万次）、Uniswap V2（～2.1万次）、Balancer（～1.2万次）和Compound（～1.0万次），被调用次数不足百笔的有dYdX（79次）、Bancor（37次）、Lendf.ME（3次）和EtherDelta（1次）。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_1sbjd7w0gc.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷交易所涉DEX分布图</p>
<p>来源：Etherscan.io, Bloxy, Huobi DeFi Labs</p>
<h2 id="基于闪电贷功能的生态正在建立"><strong>基于闪电贷功能的生态正在建立</strong></h2>
<p><strong>超10个协议平台直接或间接提供闪电贷服务</strong></p>
<p>Huobi DeFI Labs视闪电贷为区块链的一种功能技术，围绕该功能可发展出繁茂的生态。目前经统计至少有10个协议平台具有闪电贷功能，除了本报告前文分析对象之Uniswap V2、Aave、dYdX和Instadapp，还有如DeFi Saver、Furucombo、Kollateral、Deerfi、Collateralswap、NFT20等项目直接提供闪电贷服务或者通过调用其它协议的闪电贷功能提供相关服务。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_sdcz0ssimr.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_evm2e9swd0.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<h2 id="uniswap-v2的闪电贷服务拥有最高自由度"><strong>Uniswap V2的闪电贷服务拥有最高自由度</strong></h2>
<p>闪电贷功能常被用于套利的手段之一，因此调用闪电贷的自由度极大地限制了闪电贷被调用的可能性。闪电贷的自由度可从2个基本维度衡量其程度高低：</p>
<p>1. 调用手段为代码层面或者前端层面。通常可通过代码直接调用闪电贷协议其自由度高于前端层面的闪电贷协议，因为代码层面的闪电贷协议可用于多种多样的闪电贷策略，这些策略通过智能合约实现。智能合约由复杂的操作指令组成，因此代码层面的闪电贷协议更容易与智能合约结合。如Furucombo尽管为没有编码经验的用户构建闪电贷工具，使用户通过简单的拖放即可定制DeFi策略，但其可实现的闪电贷策略与通过调用Uniswap V2的闪电互换功能相比较弱。</p>
<p>2. 闪电贷协议所能提供的通证种类及额度大小。如dYdX、Aave与Uniswap V2相比能提供的闪电贷通证种类远小于Uniswap V2所能提供的种类，因此这两类协议自由度当小于Uniswap V。</p>
<p><img src="https://img.bibiqing.com/news/2021/0526/11_2e2s5o5qi5.jpg" alt="观察 | 以太坊闪电贷的众生相"></p>
<p>闪电贷协议自由度排序（标记为目前项目流动性及经营状况尚可）</p>
<p>来源：Etherscan.io, Bloxy, Huobi DeFi Labs</p>
<p>DeFi Saver 旨在打造DeFi协议一站式管理解决方案，凭借着一步(去)杠杆（Boost and Repay）、CDP自动管理（CDP Automation）和一步CDP平仓（1-transaction CDP Closing）等独特功能，目前已经提供了以Aave为闪电贷基础的丰富产品体验。用户能够管理在MakerDAO、Aave和Compound的债务头寸。</p>
<p>Deerfi协议基本沿用了Uniswap的模式，但其目前已有的池子数量较少，资产沉淀仍需较长时间；此外其提供前端页面，用户可提供含策略的部署合约地址后调用Deerfi闪电贷。</p>
<p>Kollateral旨在将dYdX、Aave等大资金池的流动性汇总，并通过简单的界面提供给开发人员。劣势在于闪电贷资金为三方平台，对于开发人员而言不如直接自己开发。</p>
<p>Collateralswap帮助用户快速Swap抵押资产，无需偿还未偿还的债务。其功能实现与DeFi Saver的Loan Shifter类似，只是目前Collateralswap的ALPHA版本仅支持MakerDAO。 </p>
<p>NFT20作为NFT的去中心化交易所和交换协议，NFT20 团队3月26日官宣上线NFT闪电贷，支持无抵押从各个NFT池中借贷NFT，目前池子流动性大于0的池子总数为61个，且暂不收费。NFT20团队称其闪电贷功能的实现方式和Aave很相似，使用场景包括套利、领取奖励等。NFT20作为闪电贷最异类的一种，其自由度较前端操控类型高。</p>
<p>Cream.Finance作为近期新上线的跨协议闪电贷服务商，支持64种借款通证，仅收取0.03%的手续费。</p>
<p><strong>总结</strong></p>
<hr>
<p>闪电贷市场总交易数仅有11万条，在以太坊上这是一个不十分起眼的交易数据。闪电贷作为以太坊的原生功能，可用于帮助用户实现抵押品转换、平仓、债仓管理等操作。同时闪电贷作为特殊的借贷工具以其无抵押的特色成为特殊的攻击、套利手段，并因之成为DeFi中的风险来源。可见闪电贷为以太坊提供了解决信用风险的方法，却也带来了攻击风险。闪电贷作为风险来源之一，目前DeFi项目需考虑如何有效预防闪电贷攻击，但今年2月份三起闪电贷攻击事件的出现表明当前的DeFi项目似乎没有有效的防御手段。</p>
<p>本报告中分析的dYdX、Aave以及Uniswap V2以各自独特的方式提供具有一定差异性的闪电贷服务。dYdX只提供三大主流资产USDC、DAI和ETH并占领了这些资产的闪电贷市场。Uniswap V2提供还款通证可以与借款通证不一致的特殊闪电贷服务，从套利角度来看，可以减少用户交易时必须换回借款通证的步骤因而降低一定Gas费用。而Aave提供封装好的闪电贷函数，在用户还款时可以直接通过调用智能合约（the flash smart contract）获得计算好的借款金额和手续费，而另外两个协议则需在外部计算并手动归还。同时Aave的闪电贷功能也是其他服务类协议（如DeFi Saver、Frucombo）的主要调用对象。</p>
<p>当前市场这三个主流闪电贷协议提供的闪电贷服务在技术层面（调用方式）、生态条件（流动性池数量和大小等）存在多元化趋势，然而有人希望在技术层面实现融合。Yield Protocol开发者于2020年11月提出标准化版本的闪电贷提案EIP-3156，于21年1月底提出标准化版本的批量闪电贷提案EIP-3234。技术层面的融合对闪电贷功能开发难度的降低有一定好处，但或许对闪电贷用户而言，闪电贷协议能提供的流动性大小和种类更重要。</p>
<p>闪电贷未来的发展方向仍值得思考，如跨链闪电贷交易实现的可能性。2020年9月份，FlashEx在Medium上发表了一篇关于跨链稳定币闪电贷的文章；该项目预想在比 特币、以太坊和波卡之间完成跨链闪电贷，但该项目官网及官方社区均再无任何更新。尽管如此，我们仍期待跨链借贷成熟之后，跨链闪电贷能有所突破。</p>
<p>此外基于闪电这个概念，闪电铸造也成为少数研究者和用户关注的议题，相比闪电贷借款金额受限于流动性池子的流动性大小，闪电铸造打破了流动性池大小的限制。但由于在本报告撰写期间未观察到闪电铸造成熟的协议或市场数据很匮乏，本报告并不针对闪电铸造进行分析。但并不代表Huobi DeFi Labs对该功能的不看好，相反，我们注意到如Yield Protocol、WETH10等具有闪电铸造特色的存在。我们期待有更多创新性的功能及相关协议出现以丰富区块链整体市场。</p>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/23003/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">关于最近三协会和总理讲话关于币圈政策的解读</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/22949/">
                <span class="next-text nav-default">华盛顿邮报：随着比特币疯狂波动，白宫正在研究相关监管空白</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#前言"><strong>前言</strong></a></li>
    <li><a href="#约11万笔闪电贷交易来自四个协议平台"><strong>约11万笔闪电贷交易来自四个协议平台</strong></a></li>
    <li><a href="#闪电贷市场随牛市进入稳定期">闪电贷市场随牛市进入稳定期</a></li>
    <li><a href="#批量闪电贷功能或仍处早期阶段">批量闪电贷功能或仍处早期阶段</a></li>
    <li><a href="#地址存续时间以短期为主">地址存续时间以短期为主</a></li>
    <li><a href="#存续时间与频数历史趋势">存续时间与频数历史趋势</a></li>
    <li><a href="#四大协议占领不同闪电贷借款通证市场"><strong>四大协议占领不同闪电贷借款通证市场</strong></a></li>
    <li><a href="#dydx前三大借款通证各累计借款数额为其它协议数倍"><strong>dYdX前三大借款通证各累计借款数额为其它协议数倍</strong></a></li>
    <li><a href="#闪电贷交易涉及的协议覆盖面广"><strong>闪电贷交易涉及的协议覆盖面广</strong></a></li>
    <li><a href="#基于闪电贷功能的生态正在建立"><strong>基于闪电贷功能的生态正在建立</strong></a></li>
    <li><a href="#uniswap-v2的闪电贷服务拥有最高自由度"><strong>Uniswap V2的闪电贷服务拥有最高自由度</strong></a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.308d1186d284e0b3f5e6187c85ea0a927fdc75459dbd958fc0fb1f4400ed52ee.js" integrity="sha256-MI0RhtKE4LP15hh8heoKkn/cdUWdvZWPwPsfRADtUu4=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
