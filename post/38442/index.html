<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          以太坊合并的底层观察：区块结构和MEV - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="本次合并对区块结构的影响是怎样的？对那些离出块最近的堆栈/组件如MEV又能催生哪些新机会？" />
<meta name="keywords" content="ETH" />







<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/38442/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="以太坊合并的底层观察：区块结构和MEV" />
<meta property="og:description" content="本次合并对区块结构的影响是怎样的？对那些离出块最近的堆栈/组件如MEV又能催生哪些新机会？" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/38442/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-05-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-05-31T00:00:00+00:00" />

<meta itemprop="name" content="以太坊合并的底层观察：区块结构和MEV">
<meta itemprop="description" content="本次合并对区块结构的影响是怎样的？对那些离出块最近的堆栈/组件如MEV又能催生哪些新机会？"><meta itemprop="datePublished" content="2022-05-31T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-05-31T00:00:00+00:00" />
<meta itemprop="wordCount" content="7822">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="以太坊合并的底层观察：区块结构和MEV"/>
<meta name="twitter:description" content="本次合并对区块结构的影响是怎样的？对那些离出块最近的堆栈/组件如MEV又能催生哪些新机会？"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">以太坊合并的底层观察：区块结构和MEV</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2022-05-31">
      2022-05-31
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 7822 字 -
        预计阅读 16 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<p><strong>摘要</strong></p>
<p><strong>在以太坊的发展路线图中，考虑到降低网络对能源</strong> <strong>/</strong> <strong>算力的消耗并降低参与门槛，增强网络扩展性以及对分片链的支持等因素，由</strong> <strong>PoW</strong> <strong>过渡到</strong> <strong>PoS</strong> <strong>是必经的一步。本次合并对区块结构的影响是怎样的？对那些离出块最近的堆栈</strong> <strong>/</strong> <strong>组件如</strong> <strong>MEV</strong> <strong>又能催生哪些新机会？</strong></p>
<p><strong>PoW</strong> <strong>似乎看起来很完美，但最容易被人诟病和批评的就是为了保证网络安全性所必需的能源消耗。</strong> 随着全网算力的增加，能耗亦快速增长。在以太坊的发展规划路线图上，PoW机制将逐渐退出历史舞台，以太坊将过渡至PoS（权益证明）而逐步淘汰PoW的挖矿机制。需要强调的是，PoW消耗的能源和算力铸就了网络的安全壁垒——51%攻击原则决定了想要攻击一个拥有强大算力的系统（类似比特币、以太坊这样的系统还承载了相当体量的财富），一定是在成本上不合算的。因此，网络财富值、网络算力和网络安全性之间能够在经济学上达成一种约束。但相应的代价是对能源的消耗（这在绿色节能的社会共识下会有压力）以及参与挖矿的门槛等。</p>
<p><strong>合并（</strong> <strong>Merge</strong> <strong>）早就在以太坊的发展规划中，为了平滑过渡，先在</strong> <strong>PoW</strong> <strong>上引入信标链。</strong> 然而面对成熟的PoW矿工和发达的矿机产业来说，合并绝非易事，其面临的利益分歧和技术障碍也是显而易见的。为了能够使得既定的PoS路线能够顺利进行，尽可能低平滑过渡，当下（合并前夕）最新的发展状态是以太坊2.0，通过引入信标链（Beaconchain，即ETH2.0），基于PoW底层区块运行，并在信标链上推进分片（sharding）的开发。这一切工作为当前精神领袖Vitalik力推PoW切换PoS做足了基础准备——因为当前的架构下切换共识机制只引入“最小破坏”影响。</p>
<p><strong>此次合并以“最小破坏”原则进行，这使得原来运行的应用客户端可以无感地切换到</strong> <strong>PoS</strong> <strong>。</strong> 由于PoW不复存在，信标链区块将包含执行层（ExecutionPayloads），执行层是当前工作量证明链上区块的合并后等价物。对于最终用户和应用程序开发人员来说，执行层是其与以太坊进行交互的地方。该层上的应用程序仍将由执行层客户端（如常用的Besu、Erigon、Geth、Nethermind等）处理。因此，由于执行层的稳定性，合并只引入了最小的破坏性更改。</p>
<p><strong>合并后的区块数据结构保持不变，无用字段设置为</strong> <strong>0</strong> <strong>或者等效值</strong> <strong>。</strong> 合并后，之前包含在工作量证明块头中的几个字段不再有用，但为了最大限度地减少对工具和基础设施的破坏，这些字段从数据结构中完全删除，而是设置为 0或者相应的等效值。这样，对于应用程序执行和开发者来说，此次合并带来的影响程度降到了最低。</p>
<p><strong>一些区块层面的细微变化还是存在的，影响有待观察。</strong> 类似MEV、闪电贷等组件应用，深入到区块数据结构的堆栈，使得合并的影响还需要在日后实践中观察。例如，随着danksharding、更大区块等新的研发推进下，我们认为，PoS机制下，闪电贷有可能出现新的形态，甚至在特殊的套利需求推动下，闪电贷和MEV相结合的应用也是可以期待的：另外对mempool的安排也值得跟踪和观察。毕竟，以太坊未来的技术路线还存在很多不确定性和想象空间。</p>
<p><strong>风险提示</strong> <strong>：</strong> 区块链商业模式落地不及预期；监管政策的不确定性。</p>
<p><strong>1.核心观点</strong></p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_0ddsdbongb.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p>在以太坊的发展路线图中，考虑到降低网络对能源/算力的消耗并降低参与门槛，增强网络扩展性以及对分片链的支持等因素，由PoW过渡到PoS是必经的一步。为了合并的顺利进行，社区通过引入信标链作为过渡共识层，基于此，推进分片等新构架的研发。</p>
<p>合并即是将PoW相关层去除，以信标链作为最终共识层。因此，区块结构和挖矿逻辑都会发生一定的变化。本文对合并后的区块结构和基于挖矿的MEV等应用进行了探讨。此次合并本着“最小破坏”原则进行，在理论上对应用层几乎没有影响，对涉及出块的中间组件如MEV、闪电贷等应用的影响还是要随着以太坊的发展而观察。</p>
<p><strong>2．PoW和PoS的基本原理和以太坊挖矿的“黑暗森林”</strong></p>
<p>在以太坊的发展路线图中，考虑到降低网络对能源/算力的消耗并降低参与门槛，增强网络扩展性，以及对分片链的支持等隐私，由PoW共识机制过渡到PoS共识机制是必经的一步。共识机制变化最主要影响的就是挖矿和矿工的世界。</p>
<p>本节介绍PoW和PoS的基本原理，以及探讨在挖矿世界最典型的应用——MEV，是如何游走于共识层。</p>
<p><strong>2.1．挖矿的规则变更：PoW和PoS基本原理</strong></p>
<p>以太坊是在计算机网络上区块链系统，可确保数据和智能合约程序在网络上的所有计算机上复制和处理，而无需一个中心化的协调器，即去中心化。其愿景是创建一个不可阻挡的抗审查、自我维持的去中心化世界计算机，或者说是一个基于互联网的分布式计算机。以太坊扩展了比特币区块链数据结构，比特币在世界各地的许多计算机上验证、存储和复制交易数据也因此称为“分布式账本”。而以太坊则更进一步，能够在世界各地的许多硬件上运行计算机代码，即所谓的“图灵完备”。</p>
<p><strong>以太坊区块链本质上</strong> <strong>也</strong> <strong>是一个基于交易的状态机。</strong> 在计算机科学中，状态机是指将读取一系列输入并基于这些输入转换到新状态的东西。以太坊区块内容状态主要就是交易和账户余额。所以以太坊是不断保持全网账户交易/余额的最新状态的网络。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_1o54zq2rr9.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p><strong>共识机制是区块链网络最核心的机制。</strong> 以太坊账户之间会产生交易转账行为，这些交易被打包分组到不同的区块里存证。一个区块可包含多笔交易，每个区块都与上一个区块按照逻辑顺序链接在一起（而不必存储在一起，即可以分布式存储），这样就形成了一个去中心化网络。用户账户状态的变更需要全网所有计算机一致认可，这种一致认可就是区块链的核心——共识（机制）。最新的区块决定了全网账户的最新状态，但最新区块总要有一台计算机节点先产生，然后同步给全网其他计算机获得共识。因此最新区块该由哪台计算机节点（矿工）先产生——即记账权争夺——是极其关键的。所谓共识机制，就是决定记账权争夺规则的机制。在矿工的术语里，也称之为挖矿。</p>
<p>任何加入网络中的计算机节点（矿工）都可以努力尝试创建和验证区块。类似于比特币，以太坊网络从创建之初直到现在仍然在使用PoW（工作量证明）机制来确保以太坊网络中的节点就链上记录的所有信息状态达成共识，确保网络安全、可信。PoW工作量证明协议要求矿工经过激烈的试错竞赛（一种数学计算），直到某个矿工最先找到一个区块的随机数。</p>
<p>PoW似乎看起来很完美，但最容易被人诟病和批评的就是为了保证网络安全性所必需的能源消耗。随着全网算力的增加，能耗亦快速增长。在以太坊的发展规划路线图上，PoW机制将逐渐退出历史舞台，以太坊将过渡至PoS（权益证明）而逐步淘汰PoW的挖矿机制。<strong>需要强调的是，</strong> <strong>PoW</strong> <strong>消耗的能源和算力铸就了网络的安全壁垒——51%</strong> <strong>攻击原则决定了想要攻击一个拥有强大算力的系统（类似比特币、以太坊这样的系统还承载了相当体量的财富），一定是在成本上不合算的。因此，网络财富值、网络算力和网络安全性之间能够在经济学上达成一种约束。但相应的代价是对能源的消耗、以及参与挖矿的门槛等。</strong></p>
<p><strong>PoS权益证明机制下，矿工节点通过质押ETH代币参与其中。系统将随机选择一位验证者来创建新区块，且它将得到相应的区块奖励。相较于需要用大量计算资源来完成此过程的PoW机制，PoS机制只需要简单的地将ETH质押到网络。PoS机制中的验证者和</strong> PoW机制中的矿工承担着完全相同的职责即负责将交易排序和创建新的区块保证所有节点就当前网络状态达成一致。PoS相较于PoW有一定的优势，例如：更加节约能源；对硬件的要求大大降低；以及因为硬件门槛的降低而得到的更强的去中心化等。</p>
<p>PoS节点矿工需要质押至少32个ETH 来获得作为验证者的资格。验证者将被随机选中，其打包的区块将成为网络最新区块。一个用户的权益也被用于激励良好的验证者行为的一种方式。例如，验证者可能会因为离线（验证失败）而损失一部分权益，或因更严重的问题而损失他们的全部权益。与PoW不同的是，验证者不需要使用大量的实际算力资源，因为它们是随机选中的，也不需要挖掘区块，只需要在被选中的时候创建区块并且在没有被选中的时候验证他人提交的区块。验证者因创建新区块和证明他们已经看到的区块而获得奖励。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_4byk3zfgsf.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p><strong>2.2. 挖矿的“黑暗森林”: MEV</strong></p>
<p>随着套利（Arbitrage）、智能合约开发和乐观转账（Optimistic Transfer）的发展，创造了一个全新的工具组合和市场，这是区块链账本系统特有的市场——其中的典型是MEV。这是在公链创新之上又诞生的创新，两项创新相互融合，创造了一个真正强大而独特的获利机制。离以太坊网络出块最近的套利行为是交易抢先打包，典型代表是Flashbots组织，这是催生MEV市场的主力。</p>
<p>MEV的全名是“Miner Extractable Value”，也就是矿工可提取价值。随着DeFi的高速发展而重要性愈加凸显，也被人们称之为“以太坊黑暗森林”。这个概念用于描述以太坊网络上的抢先交易活动——本质上这也是一种套利行为。而矿工实际上在这片“黑暗森林”中属于是绝对强者的存在，因为他们既是选手又是裁判。因为矿工可以利用自己的特权，重新排列交易顺序，插入某些交易或优先进行某些交易来使自己或某些人从中获利。</p>
<p>由于链上的一个区块只能容纳一定数量的交易，其余交易则进入内存池（Mempool）排队，实际上矿工在选择处理内存池中的待处理的交易时拥有完全的自主权（只要最后产生的区块符合标准即可，其余可由矿工自行决定），内存池是矿工用来存储待上链确认交易的一个“容器”。为了获取尽可能多的收益，矿工通常以选取最高的gas价格即交易费的标准来处理交易，但实际上ETH网络并没有要求任何人这么做。也正是因此，矿工可以利用他们的权利对交易进行重新排序并从使用者那里获得额外的利润，这其中所创造出来的价值就被称为矿工可提取价值。</p>
<p>大多数情况下，矿工处理待上链交易时的最重要考量并非根据用户提交的时间，而是用户愿意付出的交易费用多少而定。因此，MEV这个术语已经变得越来越常见，但我们目前能够看到的大部分各种形式的MEV实际上是来自一些第三方的机器人或服务而并非矿工本身。例如某些机器人程序可能会监控mempool如果他们发现一些潜在的套利机会，会以更高的GAS费执行同样的交易抢跑从而“窃取”利润。MEV交易中的一小部分收益通过 Gas 费的形式由矿工获取。以Flashbots为例：由Flashbots推出的针对gas费和拥堵等问题所提出的节点解决方案MEV-Geth已获得ETH网络相当大一部分算力的支持。而Flashbots本身的愿景其实是消除信息不对称并将可能存在的套利机会公之于众以便让所有人共享。</p>
<p>Flashbots引入了“寻找者”、“交易捆绑包”和“区块模板”三个概念：</p>
<p>首先，矿工可以委托第三方的“寻找者”去发现交易并进行排序。“寻找者”之间本身就存在竞争以找出利润最大化的交易顺序，并用标准的“交易捆绑包”将其放入下一个区块。其次，这些“交易捆绑包”会在矿工主持的暗标拍卖中估价。最后，生成带有交易序列信息的“区块模板”上链。</p>
<p>这样做好处在于矿工可以得到部分MEV的价值，以此来降低高Gas费的交易对其的吸引力。一旦用户发现他们无法单单通过提高Gas费来吸引矿工优先处理自己的交易，就会降低自己的频率，从而缓解了拥堵又进一步降低了Gas费。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_s79af0n5cj.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p><strong>简单来说，虽然MEV</strong> <strong>是以“牺牲”普通用户为代价的，但MEV</strong> <strong>也是一定程度上不可避免甚至必须的。</strong> 只要网络中存在相对公平且公认的排序协议，利用这些协议进行套利的MEV也必然存在。MEV实际上也是一种激励措施，以促使用户主动参与市场的自我平衡和调节。例如在链上不同DEX中若存在差价，则MEV有助于进行尽可能快的套利并使得价格达到平衡从而保证不同的DEX都能够反映市场的真实行情。最常见的MEV形式是在多个去中心化交易所（DEX）之间进行套利的第三方机器人，以及链上的DEX交易所和链下的CEX交易所之间也会出现很多的套利机会。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_00est1usug.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p><strong>3．以太坊区块到底“合并”了什么？</strong></p>
<p><strong>3.1．以太坊“合并”了哪些数据结构？</strong></p>
<p>合并（merge）早就在以太坊的发展规划中，然而面对成熟的PoW矿工和发达的矿机产业来说，合并绝非易事，其面临的利益分歧和技术障碍也是显而易见的。为了能够使得既定的PoS路线能够顺利进行，尽可能平滑过渡，当下（合并前夕）最新的发展状态是以太坊2.0，通过引入信标链（Beaconchain，即ETH2），基于PoW底层区块运行，并在信标链上推进分片（sharding）的开发。这一切工作为当前精神领袖Vitalik力推PoW切换PoS做足了基础准备——因为当前的架构下切换共识机制只引入“最小破坏”影响。否则，很难想象以太坊这样运行了8年的庞大生态进行如此大的转换。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_ebd3u8ei6y.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p>以太坊此次合并本质上是将ETH2.0状态下的PoW主链（ETH1)去除，代之以按照PoS共识机制运行的信标链来作为共识层——或者说是将工作量证明的主链和信标链“合并”。简单来说，之前引入的信标链这一层有点像过渡时期的隔离墙，时机成熟直接“喧宾夺主”，作为最终的共识层，PoW底层被直接剥离。合并后，主链将从PoW 切换到PoS共识机制。除此之外，大多数客户端的功能（如EVM）、状态以及其如何执行事务，都将保持不变。合并后，当前的 ETH1 和 ETH2 客户端分别成为以太坊的执行层和共识层（或引擎）。这意味着 ETH1 或信标链客户端的节点运营商将需要运行全部堆栈的“另一半”以成为完全验证的节点。</p>
<p><strong>此次合并以“最小破坏”原则进行，这使得原来运行的应用客户端可以无感地切换到PoS</strong> <strong>。</strong> 由于PoW不复存在，信标链区块将包含执行层（ExecutionPayloads），执行层是当前工作量证明链上区块的合并后等价物。对于最终用户和应用程序开发人员来说，执行层是其与以太坊进行交互的地方。该层上的应用程序仍将由执行层客户端（如常用的Besu、Erigon、Geth、Nethermind等）处理。因此，由于执行层的稳定性，合并只引入了最小的破坏性更改。这一点，在以太坊2.0设计之初就被考虑到了，信标链先是作为PoW之上的中间层存在，类似第二层共识网络，待到“合并”，将这一层直接作为共识层，并将PoW层内的执行相关组件组合到新的共识层。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_npfp43rt82.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p><strong>合并后的区块数据结构保持不变，无用字段设置为0</strong> <strong>或者等效值。</strong> 合并后，之前包含在工作量证明块头中的几个字段不再有用，但为了最大限度地减少对工具和基础设施的破坏，这些字段从数据结构中完全删除，而是设置为 0或者相应的等效值。这样，对于应用程序执行和开发者来说，此次合并带来的影响程度降到了最低。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_yzamdgyl8t.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p><strong>3.2 “合并”的影响到底是怎样的？</strong></p>
<p>通过上面的对比我们可以看出，合并实际上是以“最小破坏性”的原则推进，对应用层来说几乎是无感的，而区块底层和应用层之间的各类组件，理论上并不会受到太多影响并会继续存在下去。</p>
<p><strong>值得注意的是合并完成后，交易排序的流程并没有产生太大变化。</strong> 同样我们也有理由相信MEV仍然会继续存在。不同之处在于，决定交易顺序的人由矿工变成了验证者，验证者将被随机选中参与到信标链的执行。这也意味着我们前文提到的以Flashbots为代表的MEV分配机制也会继续存在。</p>
<p><img src="https://img.bibiqing.com/news/2022/0531/20_0pjg1pdjys.png" alt="以太坊合并的底层观察：区块结构和MEV"></p>
<p>MEV是非常难以衡量的，但即便如此，在合并之后验证者也可以选择将他们手中的资源集中在一个共同验证者池中来抵消选中概率和 REV 分布的差异（一定程度上类似矿池）。虽然以太坊 PoS 的机制使得验证者能够通过有效证明获得几乎恒定的奖励（而并非像 PoW 那样只集中在产生一个区块时获得）。但在验证者奖励中继续引入 MEV 机制同样是一种集中力量抱团取暖的体现并迫使更多独立验证者加入一个共同验证者池以获取更低的不可预测性和更快速的流动性，这与PoW时代的矿池具有类似的吸引力。</p>
<p><strong>由此可见，一些区块层面的细微变化还是存在的，后续影响有待观察。</strong> 类似MEV、闪电贷等组件应用，深入到区块数据结构的堆栈，使得合并的影响还需要在日后实践中观察。例如，随着danksharding、更大区块等新的研发推进下，我们认为，PoS机制下，闪电贷有可能出现新的形态，甚至在特殊的套利需求推动下，闪电贷和MEV相结合的应用也是可以期待的：另外对mempool的安排也值得跟踪和观察。毕竟，以太坊未来的技术路线还存在很多不确定性和想象空间。</p>
<p><strong>4.投资建议</strong> <strong>：</strong> <strong>关注公链生态及流动性质押服务商</strong></p>
<p>以太坊自诞生以来已经历过两轮行业周期的检验，仍是公链生态的标杆、区块链创新的源泉，目前在各类底层技术突破，包括ZKrollup、分片、Danksharding等方面都做了诸多尝试。此前的POW挖矿为系统的安全、稳定做出了贡献，转POS之后，公链生态的竞争将进入2.0阶段，是Solana的另起炉灶还是Polygon的借力打力？公链在底层、应用、资本等方面的全方位竞争值得期待。</p>
<p>同时，随着以太坊合并日期的逐渐迫近，质押风险的降低、赛道生态的日渐繁荣，我们认为合并前后将迎来以太坊质押比例的陡增。而且质押渠道的边际增长将更多来源于除以太坊官方、交易所之外的流动性质押服务商来源。官方奖励比例的降低，也将促使用户选择具有更多DeFi增值的服务商平台（如Lido），来获得更高的年化收益。</p>
<p>与此同时，以太坊的升级目的将是更多地支持链上生态发展，底层各类服务商均以此为目标。在过去几年中，我们看到以太坊引领了DeFi、NFT等创新趋势，包括矿工在内的生态玩家也都因此受益。合并POS后，质押者受益仍与链上应用的繁荣程度息息相关，元宇宙、Web3.0的到来为将来的ETH提供了更广阔的的空间，毕竟这一新兴赛道推崇原创，以太坊生态仍最具看点。</p>
<p>风险提示</p>
<p>区块链商业模式落地不及预期：区块链、密码学等相关技术和项目处于发展初期，存在商业模式落地不及预期的风险。</p>
<p>监管政策的不确定性：区块链项目实际运行过程中涉及到多项金融、网络及其他监管政策，目前各国监管政策还处于研究和探索阶段，并没有一个成熟的监管模式，所以行业面临监管政策不确定性的风险。</p>
<p>本文节选自国盛证券研究所已于2022年5月26日发布的报告《国盛区块链 | 行业研究：以太坊合并的底层观察：区块结构和MEV》，具体内容请详见相关报告。</p>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/38422/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">行业专家：市场在熊市周期进行调整是健康的</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/38426/">
                <span class="next-text nav-default">以太坊合并的底层观察：区块链结构和EVM影响</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.308d1186d284e0b3f5e6187c85ea0a927fdc75459dbd958fc0fb1f4400ed52ee.js" integrity="sha256-MI0RhtKE4LP15hh8heoKkn/cdUWdvZWPwPsfRADtUu4=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
